package com.statcraft.controller;

import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.statcraft.entities.BooksEntity;
import com.statcraft.repository.BooksRepo;

@RestController
public class BooksController {

	@Autowired
	BooksRepo booksRepo;

	@Autowired
	BooksEntity booksEntity = null;

	Logger logger = Logger.getLogger(getClass());

	String name = "Java";
	String author = "James Gosling";

	@RequestMapping("/")
	public String test(@PathVariable Integer number) {
		logger.info("inside save method" + " The given number is : " + number);
		String msg = null;
		if (number.equals(null)) {
			for (int i = 0; i < number; i++) {
				booksEntity = new BooksEntity(i, name, author);
				booksRepo.save(booksEntity);
				logger.info("Books data  saved");
				msg = "successfull ";
			}

		} else {
			msg = "Please try again";
			return " ";
		}
	}
}
